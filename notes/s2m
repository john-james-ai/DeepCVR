SET FOREIGN_KEY_CHECKS = 0;
DROP TABLE IF EXISTS `Core Data`;
DROP TABLE IF EXISTS `Common Features`;
DROP TABLE IF EXISTS `Core Data`;
DROP TABLE IF EXISTS `Common Features Data`;
DROP TABLE IF EXISTS `Core`;
DROP TABLE IF EXISTS `Core Features`;
DROP TABLE IF EXISTS `Common Features`;
DROP TABLE IF EXISTS `Common`;
SET FOREIGN_KEY_CHECKS = 1;

CREATE TABLE `Core Data` (
    `sample_id` INTEGER NOT NULL,
    `click_label` INTEGER NOT NULL,
    `conversion_label` INTEGER NOT NULL,
    `common_feature_index` INTEGER NOT NULL,
    `num_features` INTEGER NOT NULL,
    `feature_list` INTEGER NOT NULL
);

CREATE TABLE `Common Features` (
    `common_feature_index` INTEGER NOT NULL,
    `num_features` INTEGER NOT NULL,
    `feature_list` INTEGER NOT NULL
);

CREATE TABLE `Core Data` (
);

CREATE TABLE `Common Features Data` (
    `common_feature_index` INTEGER NOT NULL,
    `num_features` INTEGER NOT NULL,
    `feature_list` INTEGER NOT NULL
);

CREATE TABLE `Core` (
    `sample_id` BIGINT NOT NULL,
    `click_label` BIGINT NOT NULL,
    `conversion_label` BIGINT NOT NULL,
    `common_feature_index` CHAR(16) NOT NULL,
    `num_features` BIGINT NOT NULL,
    PRIMARY KEY (`sample_id`),
    UNIQUE (`sample_id`)
);

CREATE TABLE `Core Features` (
    `id` BIGINT NOT NULL,
    `sample_id` BIGINT NOT NULL,
    `feature_name` VARCHAR NOT NULL,
    `feature_id` BIGINT NOT NULL,
    `feature_value` DOUBLE NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE (`id`)
);

CREATE TABLE `Common Features` (
    `id` BIGINT NOT NULL,
    `common_feature_index` CHAR(16) NOT NULL,
    `feature_name` VARCHAR NOT NULL,
    `feature_id` BIGINT NOT NULL,
    `feature_value` DOUBLE NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE (`id`)
);

CREATE TABLE `Common` (
    `common_feature_index` CHAR(16) NOT NULL,
    `num_features` BIGINT NOT NULL,
    PRIMARY KEY (`common_feature_index`)
);

ALTER TABLE `Core Features` ADD FOREIGN KEY (`sample_id`) REFERENCES `Core Data`(`sample_id`);
ALTER TABLE `Common Features` ADD FOREIGN KEY (`common_feature_index`) REFERENCES `Core`(`common_feature_index`);